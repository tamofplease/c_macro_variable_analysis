id,name,value
c0c6ed19-8618-4c6d-a424-023aaccaece0,FIBER_READ,"do {                                       \
    ssize_t ret;                                                             \
    int err;                                                                 \
    if (IS_READABLE(_fe)) {                                                  \
        CLR_READABLE(_fe);                                                   \
    } else if (fiber_wait_read(_fe) < 0) {                                   \
        return -1;                                                           \
    }                                                                        \
    if (acl_fiber_canceled(_fe->fiber_r)) {                                  \
        acl_fiber_set_error(_fe->fiber_r->errnum);                           \
        return -1;                                                           \
    }                                                                        \
    ret = (*_fn)(_fe->fd, __VA_ARGS__);                                      \
    if (ret >= 0) {                                                          \
        return ret;                                                          \
    }                                                                        \
    err = acl_fiber_last_error();                                            \
    fiber_save_errno(err);                                                   \
    if (!error_again(err)) {                                                 \
        if (!(_fe->type & TYPE_EVENTABLE)) {                                 \
            fiber_file_free(_fe);                                            \
        }                                                                    \
        return -1;                                                           \
    }                                                                        \
} while (1)"
283227b3-2f14-44be-926a-a2d5c8dead85,FIBER_READ,"do {                                  \
    ssize_t ret;                                                             \
    int err;                                                                 \
    if (IS_READABLE(_fe)) {                                                  \
        CLR_READABLE(_fe);                                                   \
    } else if (fiber_wait_read(_fe) < 0) {                                   \
        return -1;                                                           \
    }                                                                        \
    if (acl_fiber_canceled(_fe->fiber_r)) {                                  \
        acl_fiber_set_error(_fe->fiber_r->errnum);                           \
        return -1;                                                           \
    }                                                                        \
    ret = (*_fn)(_fe->fd, ##_args);                                          \
    if (ret >= 0) {                                                          \
        return ret;                                                          \
    }                                                                        \
    err = acl_fiber_last_error();                                            \
    fiber_save_errno(err);                                                   \
    if (!error_again(err)) {                                                 \
        if (!(_fe->type & TYPE_EVENTABLE)) {                                 \
            fiber_file_free(_fe);                                            \
        }                                                                    \
        return -1;                                                           \
    }                                                                        \
} while (1)"
8fdcf2bc-8127-401b-bc88-25c6e39d34b2,FILE_ALLOC,"do {                                            \
    (f) = file_event_alloc(fd);                                              \
    (f)->fiber_r->status = FIBER_STATUS_NONE;                                \
    (f)->fiber_w->status = FIBER_STATUS_NONE;                                \
    (f)->mask   = (t);                                                       \
    (f)->type   = TYPE_EVENTABLE;                                            \
} while (0)"
fc2f987b-b2bf-46c5-a971-c76dac3cc792,SET_READ,"do {                                                     \
    (f)->in.read_ctx.buf = buf;                                              \
    (f)->in.read_ctx.len = (int) count;                                      \
    (f)->mask |= EVENT_READ;                                                 \
} while (0)"
81c5f528-0466-4778-af16-0c441544e369,SET_READV,"do {                                                    \
    (f)->in.readv_ctx.iov = iov;                                             \
    (f)->in.readv_ctx.cnt = iovcnt;                                          \
    (f)->in.readv_ctx.off = 0;                                               \
    (f)->mask |= EVENT_READV;                                                \
} while (0)"
bac780de-3e89-4049-8e97-7e72b5878a0d,SET_RECVMSG,"do {                                                  \
    (f)->in.recvmsg_ctx.msg   = msg;                                         \
    (f)->in.recvmsg_ctx.flags = flags;                                       \
    (f)->mask |= EVENT_RECVMSG;                                              \
} while (0)"
1d048e74-c1d1-4f36-b7e8-ef428b4b9851,SET_RECV,"do {                                                     \
    (f)->in.recv_ctx.buf   = buf;                                            \
    (f)->in.recv_ctx.len   = (unsigned) len;                                 \
    (f)->in.recv_ctx.flags = flags;                                          \
    (f)->mask |= EVENT_RECV;                                                 \
} while (0)"
c6942d2f-24ba-46b7-a9e1-1548671e0888,SET_RECVFROM,"do {                                                 \
    (f)->in.recvfrom_ctx.buf      = buf;                                     \
    (f)->in.recvfrom_ctx.len      = (unsigned) len;                          \
    (f)->in.recvfrom_ctx.flags    = flags;                                   \
    (f)->in.recvfrom_ctx.src_addr = src_addr;                                \
    (f)->in.recvfrom_ctx.addrlen  = addrlen;                                 \
    (f)->mask |= EVENT_RECVFROM;                                             \
} while (0)"

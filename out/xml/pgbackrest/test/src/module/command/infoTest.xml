<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" revision="1.0.0" language="C" filename="/cloned_projects/pgbackrest/test/src/module/command/infoTest.c"><comment type="block" format="doxygen">/***********************************************************************************************************************************
Test Info Command
***********************************************************************************************************************************/</comment>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/crypto/cipherBlock.h"</cpp:file></cpp:include>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/io/bufferRead.h"</cpp:file></cpp:include>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/io/bufferWrite.h"</cpp:file></cpp:include>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"storage/posix/storage.h"</cpp:file></cpp:include>

<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/harnessConfig.h"</cpp:file></cpp:include>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/harnessInfo.h"</cpp:file></cpp:include>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"common/harnessFork.h"</cpp:file></cpp:include>

<comment type="block" format="doxygen">/***********************************************************************************************************************************
Test Run
***********************************************************************************************************************************/</comment>
<function><type><specifier>static</specifier> <name>void</name></type>
<name>testRun</name><parameter_list>(<parameter><decl><type><name>void</name></type></decl></parameter>)</parameter_list>
<block>{<block_content>
    <expr_stmt><expr><call><name>FUNCTION_HARNESS_VOID</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

    <comment type="line">// Create storage object for writing to test locations when a stanza is not set</comment>
    <decl_stmt><decl><type><name>Storage</name> <modifier>*</modifier></type><name>storageTest</name> <init>= <expr><call><name>storagePosixNewP</name><argument_list>(<argument><expr><name>TEST_PATH_STR</name></expr></argument>, <argument><expr><operator>.</operator><name>write</name> <operator>=</operator> <name>true</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <comment type="line">// The tests expect the timezone to be UTC</comment>
    <expr_stmt><expr><call><name>setenv</name><argument_list>(<argument><expr><literal type="string">"TZ"</literal></expr></argument>, <argument><expr><literal type="string">"UTC"</literal></expr></argument>, <argument><expr><name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <comment type="line">// *****************************************************************************************************************************</comment>
    <if_stmt><if>if <condition>(<expr><call><name>testBegin</name><argument_list>(<argument><expr><literal type="string">"infoRender()"</literal></expr></argument>)</argument_list></call></expr>)</condition>
    <block>{<block_content>
        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argList</name> <init>= <expr><call><name>strLstNew</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argListText</name> <init>= <expr><call><name>strLstDup</name><argument_list>(<argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"no stanzas have been created"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(<argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"[]"</literal></expr></argument>, <argument><expr><literal type="string">"json - repo but no stanzas"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListText</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(<argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="string">"No stanzas exist in the repository.\n"</literal></expr></argument>, <argument><expr><literal type="string">"text - no stanzas"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"repo is still empty but stanza option is specified"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argListStanzaOpt</name> <init>= <expr><call><name>strLstDup</name><argument_list>(<argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argListStanzaOpt</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":[],"</literal>
                    <literal type="string">"\"backup\":[],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":[],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":1,"</literal>
                                <literal type="string">"\"message\":\"missing stanza path\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":1,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"missing stanza path\""</literal>
                        <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - empty repo, stanza option specified"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argListTextStanzaOpt</name> <init>= <expr><call><name>strLstDup</name><argument_list>(<argument><expr><name>argListText</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (missing stanza path)\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - empty repo, stanza option specified"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"stanza path exists but is empty"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(<argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create repo stanza archive path"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(<argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_BACKUP</name></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create repo stanza backup path"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (missing stanza data)\n"</literal>
            <literal type="string">"    cipher: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - missing stanza data"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":[],"</literal>
                    <literal type="string">"\"backup\":[],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":[],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":3,"</literal>
                                <literal type="string">"\"message\":\"missing stanza data\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":3,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"missing stanza data\""</literal>
                        <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - missing stanza data"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"backup.info file exists, but archive.info does not"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Put backup info to file</comment>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza1/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201306121,\"db-control-version\":937,\"db-system-id\":6569239123849665666,"</literal>
                <literal type="string">"\"db-version\":\"9.3\"}\n"</literal>
            <literal type="string">"2={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665679,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":[],"</literal>
                    <literal type="string">"\"backup\":[],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":[],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":99,"</literal>
                                <literal type="string">"\"message\":\"[FileMissingError] unable to load info file '"</literal>
                                <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info' or '"</literal>
                                <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info.copy':\\n"</literal>
                                <literal type="string">"FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info'"</literal>
                                <literal type="string">" for read\\n"</literal>
                                <literal type="string">"FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name>
                                <literal type="string">"/repo/archive/stanza1/archive.info.copy' for read\\n"</literal>
                                <literal type="string">"HINT: archive.info cannot be opened but is required to push/get WAL segments.\\n"</literal>
                                <literal type="string">"HINT: is archive_command configured correctly in postgresql.conf?\\n"</literal>
                                <literal type="string">"HINT: has a stanza-create been performed?\\n"</literal>
                                <literal type="string">"HINT: use --no-archive-check to disable archive checks during backup if you have an alternate"</literal>
                                <literal type="string">" archiving scheme.\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":99,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"other\""</literal>
                        <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - other error, single repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (other)\n"</literal>
            <literal type="string">"            [FileMissingError] unable to load info file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info' or '"</literal>
                         <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info.copy':\n"</literal>
            <literal type="string">"            FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info' for read\n"</literal>
            <literal type="string">"            FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/archive.info.copy'"</literal>
                         <literal type="string">" for read\n"</literal>
            <literal type="string">"            HINT: archive.info cannot be opened but is required to push/get WAL segments.\n"</literal>
            <literal type="string">"            HINT: is archive_command configured correctly in postgresql.conf?\n"</literal>
            <literal type="string">"            HINT: has a stanza-create been performed?\n"</literal>
            <literal type="string">"            HINT: use --no-archive-check to disable archive checks during backup if you have an alternate archiving"</literal>
            <literal type="string">" scheme.\n"</literal>
            <literal type="string">"    cipher: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - other error, single repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"info files exist with mismatched db-ids and no current backups - lock detected"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Only the current db information from the db:history will be processed.</comment>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>INFO_ARCHIVE_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=3\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6569239123849665679,\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-id\":6569239123849665666,\"db-version\":\"9.3\"}\n"</literal>
            <literal type="string">"3={\"db-id\":6569239123849665679,\"db-version\":\"9.4\"}\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Create a WAL directory in 9.3-2 but since there are no WAL files or backups it will not show</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(
            <argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.3-2/0000000100000000"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create empty db2 archive WAL1 directory"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// archive section will cross reference backup db-id 2 to archive db-id 3 but db section will only use the db-ids from</comment>
        <comment type="line">// backup.info. Execute while a backup lock is held.</comment>
        <macro><name>HRN_FORK_BEGIN</name><argument_list>()</argument_list></macro>
        <block>{<block_content>
            <macro><name>HRN_FORK_CHILD_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <expr_stmt><expr><call><name>TEST_RESULT_INT_NE</name><argument_list>(
                    <argument><expr><call><name>lockAcquire</name><argument_list>(<argument><expr><call><name>cfgOptionStr</name><argument_list>(<argument><expr><name>cfgOptLockPath</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"999-ffffffff"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><name>true</name></expr></argument>)</argument_list></call></expr></argument>,
                    <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="string">"create backup/expire lock"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify parent that lock has been acquired</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_PUT</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Wait for parent to allow release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_GET</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>lockRelease</name><argument_list>(<argument><expr><name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_CHILD_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

            <macro><name>HRN_FORK_PARENT_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <comment type="line">// Wait for child to acquire lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_GET</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":2,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-3\","</literal>
                                    <literal type="string">"\"max\":null,"</literal>
                                    <literal type="string">"\"min\":null"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"backup\":[],"</literal>
                             <literal type="string">"\"cipher\":\"none\","</literal>
                             <literal type="string">"\"db\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6569239123849665666,"</literal>
                                    <literal type="string">"\"version\":\"9.3\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":2,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6569239123849665679,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"name\":\"stanza1\","</literal>
                            <literal type="string">"\"repo\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"none\","</literal>
                                    <literal type="string">"\"key\":1,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":2,"</literal>
                                        <literal type="string">"\"message\":\"no valid backups\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":2,"</literal>
                                <literal type="string">"\"lock\":{\"backup\":{\"held\":true}},"</literal>
                                <literal type="string">"\"message\":\"no valid backups\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"]"</literal></expr></argument>,
                    <argument><expr><literal type="string">"json - single stanza, no valid backups, backup/expire lock detected"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListText</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
                    <literal type="string">"    status: error (no valid backups, backup/expire running)\n"</literal>
                    <literal type="string">"    cipher: none\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (current)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.4): none present\n"</literal></expr></argument>,
                    <argument><expr><literal type="string">"text - single stanza, no valid backups, backup/expire lock detected"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify child to release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_PUT</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_PARENT_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <expr_stmt><expr><call><name>HRN_FORK_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo - stanza missing on specified repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argList2</name> <init>= <expr><call><name>strLstDup</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (missing stanza path)\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, requested stanza missing on selected repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo - WAL segment on repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Add WAL segment</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-3/0000000300000000/000000030000000000000001-47dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write WAL db3 timeline 3 repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (no valid backups)\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000030000000000000001/000000030000000000000001\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, single stanza, one wal segment"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"coverage for stanzaStatus branches &amp;&amp; percent complete null"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Db1 and Db3 (from above) have same system-id and db-version so consider them the same for WAL reporting</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1/0000000100000000/000000010000000000000002-ac61b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write WAL db1 timeline 1 repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1/0000000100000000/000000010000000000000003-37dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write WAL db1 timeline 1 repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1/0000000200000000/000000020000000000000003-37dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write WAL db1 timeline 2 repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(
            <argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1/0000000300000000"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create empty db1 timeline 3 directory"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Create a WAL file in 9.3-2 so that a prior will show</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>,
            <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.3-2/0000000100000000/000000010000000000000001-ac61b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write WAL db2 timeline 1 repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=3\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20181116-154756F={\"backrest-format\":5,\"backrest-version\":\"2.04\","</literal>
            <literal type="string">"\"backup-archive-start\":null,\"backup-archive-stop\":null,"</literal>
            <literal type="string">"\"backup-info-repo-size\":3159776,\"backup-info-repo-size-delta\":3159,\"backup-info-size\":26897030,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897030,\"backup-timestamp-start\":1542383276,\"backup-timestamp-stop\":1542383289,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"20201116-154900F={\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000030000000000000001\",\"backup-archive-stop\":\"000000030000000000000001\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159776,\"backup-info-repo-size-delta\":3159,\"backup-info-size\":26897033,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897033,\"backup-timestamp-start\":1605541676,\"backup-timestamp-stop\":1605541680,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":3,\"option-archive-check\":true,\"option-archive-copy\":false,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665679,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-catalog-version\":201306121,\"db-control-version\":937,\"db-system-id\":6569239123849665666,"</literal>
                <literal type="string">"\"db-version\":\"9.3\"}\n"</literal>
            <literal type="string">"3={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665679,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Execute while a backup lock is held</comment>
        <macro><name>HRN_FORK_BEGIN</name><argument_list>()</argument_list></macro>
        <block>{<block_content>
            <macro><name>HRN_FORK_CHILD_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <expr_stmt><expr><call><name>TEST_RESULT_INT_NE</name><argument_list>(
                    <argument><expr><call><name>lockAcquire</name><argument_list>(<argument><expr><call><name>cfgOptionStr</name><argument_list>(<argument><expr><name>cfgOptLockPath</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"777-afafafaf"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><name>true</name></expr></argument>)</argument_list></call></expr></argument>,
                    <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="string">"create backup/expire lock"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_VOID</name><argument_list>(<argument><expr><call><name>lockWriteDataP</name><argument_list>(<argument><expr><name>lockTypeBackup</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"write lock data"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify parent that lock has been acquired</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_PUT</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Wait for parent to allow release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_GET</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>lockRelease</name><argument_list>(<argument><expr><name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_CHILD_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

            <macro><name>HRN_FORK_PARENT_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <comment type="line">// Wait for child to acquire lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_GET</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"["</literal>
                        <literal type="string">"{"</literal>
                             <literal type="string">"\"archive\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-1\","</literal>
                                    <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":2,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.3-2\","</literal>
                                    <literal type="string">"\"max\":\"000000010000000000000001\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000001\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":3,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-3\","</literal>
                                    <literal type="string">"\"max\":\"000000030000000000000001\","</literal>
                                    <literal type="string">"\"min\":\"000000030000000000000001\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"backup\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":null,"</literal>
                                        <literal type="string">"\"stop\":null"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.04\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":26897030,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":3159,"</literal>
                                            <literal type="string">"\"size\":3159776"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":26897030"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20181116-154756F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1542383276,"</literal>
                                        <literal type="string">"\"stop\":1542383289"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000030000000000000001\","</literal>
                                        <literal type="string">"\"stop\":\"000000030000000000000001\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.30\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":3,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":26897033,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":3159,"</literal>
                                            <literal type="string">"\"size\":3159776"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":26897033"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20201116-154900F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1605541676,"</literal>
                                        <literal type="string">"\"stop\":1605541680"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"cipher\":\"none\","</literal>
                             <literal type="string">"\"db\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6569239123849665679,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":2,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6569239123849665666,"</literal>
                                    <literal type="string">"\"version\":\"9.3\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":3,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6569239123849665679,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"name\":\"stanza1\","</literal>
                            <literal type="string">"\"repo\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"none\","</literal>
                                    <literal type="string">"\"key\":1,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":0,"</literal>
                                        <literal type="string">"\"message\":\"ok\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"lock\":{\"backup\":{\"held\":true}},"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"]"</literal></expr></argument>,
                    <argument><expr><literal type="string">"json - single stanza, valid backup, no priors, no archives in latest DB, backup/expire lock detected"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListText</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
                    <literal type="string">"    status: ok (backup/expire running)\n"</literal>
                    <literal type="string">"    cipher: none\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (prior)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.3): 000000010000000000000001/000000010000000000000001\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (current)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000030000000000000001\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20181116-154756F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2018-11-16 15:47:56 / 2018-11-16 15:48:09\n"</literal>
                    <literal type="string">"            wal start/stop: n/a\n"</literal>
                    <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20201116-154900F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2020-11-16 15:47:56 / 2020-11-16 15:48:00\n"</literal>
                    <literal type="string">"            wal start/stop: 000000030000000000000001 / 000000030000000000000001\n"</literal>
                    <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
                    <argument><expr><literal type="string">"text - single stanza, valid backup, no priors, no archives in latest DB, backup/expire lock detected"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify child to release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_PUT</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_PARENT_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <expr_stmt><expr><call><name>HRN_FORK_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Cleanup</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_REMOVE</name><argument_list>(<argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza1/9.3-2"</literal></expr></argument>, <argument><expr><operator>.</operator><name>recurse</name> <operator>=</operator> <name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_REMOVE</name><argument_list>(<argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza1/9.4-3"</literal></expr></argument>, <argument><expr><operator>.</operator><name>recurse</name> <operator>=</operator> <name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// backup.info/archive.info files exist, backups exist, archives exist, multi-repo (mixed) with one stanza existing on both</comment>
        <comment type="line">// repos and the db history is different between the repos</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"mixed multi-repo, percent complete non-null"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza1/"</literal> <name>INFO_ARCHIVE_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6625592122879095702,\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-id\":6626363367545678089,\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file - stanza1, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza1/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20181119-152138F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000002\",\"backup-archive-stop\":\"000000010000000000000002\","</literal>
            <literal type="string">"\"backup-info-repo-size\":2369186,\"backup-info-repo-size-delta\":2369186,"</literal>
            <literal type="string">"\"backup-info-size\":20162900,\"backup-info-size-delta\":20162900,"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640898,\"backup-timestamp-stop\":1542640899,\"backup-type\":\"full\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"20181119-152138F_20181119-152152D={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\",\"backup-archive-start\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-archive-stop\":\"000000020000000000000003\",\"backup-info-repo-size\":2369186,"</literal>
            <literal type="string">"\"backup-info-repo-size-delta\":346,\"backup-info-size\":20162900,\"backup-info-size-delta\":8428,"</literal>
            <literal type="string">"\"backup-prior\":\"20181119-152138F\",\"backup-reference\":[\"20181119-152138F\"],"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640912,\"backup-timestamp-stop\":1542640915,\"backup-type\":\"diff\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"20181119-152138F_20181119-152155I={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-info-repo-size\":2369186,"</literal>
            <literal type="string">"\"backup-info-repo-size-delta\":346,\"backup-info-size\":20162900,\"backup-info-size-delta\":8428,"</literal>
            <literal type="string">"\"backup-lsn-start\":\"285/89000028\",\"backup-lsn-stop\":\"285/89001F88\","</literal>
            <literal type="string">"\"backup-prior\":\"20181119-152138F_20181119-152152D\","</literal>
            <literal type="string">"\"backup-reference\":[\"20181119-152138F\",\"20181119-152138F_20181119-152152D\"],"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640915,\"backup-timestamp-stop\":1542640917,\"backup-type\":\"incr\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"20201116-155000F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000002\",\"backup-archive-stop\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605541800,\"backup-timestamp-stop\":1605541802,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":2,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"20201116-155000F_20201119-152100I={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-annotation\":{\"extra key\":\"this is an annotation\",\"source\":\"this is another annotation\"},"</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000005\",\"backup-archive-stop\":\"000000010000000000000005\","</literal>
            <literal type="string">"\"backup-error\":false,\"backup-info-repo-size\":2369186,"</literal>
            <literal type="string">"\"backup-info-repo-size-delta\":346,\"backup-info-size\":20162900,\"backup-info-size-delta\":8428,"</literal>
            <literal type="string">"\"backup-lsn-start\":\"285/89000028\","</literal>
            <literal type="string">"\"backup-prior\":\"20201116-155000F\",\"backup-reference\":[\"20201116-155000F\"],"</literal>
            <literal type="string">"\"backup-timestamp-start\":1605799260,\"backup-timestamp-stop\":1605799263,\"backup-type\":\"incr\","</literal>
            <literal type="string">"\"db-id\":2,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201510051\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6625592122879095702,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-catalog-version\":201510051,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file - stanza1, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Manifest with all features</comment>
        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_HEADER</name></cpp:macro>                                                                                               \
            <cpp:value>"[backup]\n"                                                                                                           \
            "backup-archive-start=\"000000030000028500000089\"\n"                                                                  \
            "backup-archive-stop=\"000000030000028500000089\"\n"                                                                   \
            "backup-label=\"20190818-084502F_20190820-084502D\"\n"                                                                 \
            "backup-lsn-start=\"285/89000028\"\n"                                                                                  \
            "backup-lsn-stop=\"285/89001F88\"\n"                                                                                   \
            "backup-prior=\"20190818-084502F\"\n"                                                                                  \
            "backup-timestamp-copy-start=1565282141\n"                                                                             \
            "backup-timestamp-start=1565282140\n"                                                                                  \
            "backup-timestamp-stop=1565282142\n"                                                                                   \
            "backup-type=\"full\"\n"                                                                                               \
            "\n"                                                                                                                   \
            "[backup:db]\n"                                                                                                        \
            "db-catalog-version=201409291\n"                                                                                       \
            "db-control-version=942\n"                                                                                             \
            "db-id=1\n"                                                                                                            \
            "db-system-id=1000000000000000094\n"                                                                                   \
            "db-version=\"9.4\"\n"                                                                                                 \
            "\n"                                                                                                                   \
            "[backup:option]\n"                                                                                                    \
            "option-archive-check=true\n"                                                                                          \
            "option-archive-copy=true\n"                                                                                           \
            "option-backup-standby=false\n"                                                                                        \
            "option-buffer-size=16384\n"                                                                                           \
            "option-checksum-page=true\n"                                                                                          \
            "option-compress=false\n"                                                                                              \
            "option-compress-level=3\n"                                                                                            \
            "option-compress-level-network=3\n"                                                                                    \
            "option-delta=false\n"                                                                                                 \
            "option-hardlink=false\n"                                                                                              \
            "option-online=false\n"                                                                                                \
            "option-process-max=32\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_TARGET</name></cpp:macro>                                                                                               \
            <cpp:value>"\n"                                                                                                                   \
            "[backup:target]\n"                                                                                                    \
            "pg_data={\"path\":\"/pg/base\",\"type\":\"path\"}\n"                                                                  \
            "pg_data/pg_hba.conf={\"file\":\"pg_hba.conf\",\"path\":\"../pg_config\",\"type\":\"link\"}\n"                         \
            "pg_data/pg_stat={\"path\":\"../pg_stat\",\"type\":\"link\"}\n"                                                        \
            "pg_tblspc/1={\"path\":\"/tblspc/ts1\",\"tablespace-id\":\"1\",\"tablespace-name\":\"ts1\",\"type\":\"link\"}\n"       \
            "pg_tblspc/12={\"path\":\"/tblspc/ts12\",\"tablespace-id\":\"12\",\"tablespace-name\":\"ts12\",\"type\":\"link\"}\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_DB</name></cpp:macro>                                                                                                   \
            <cpp:value>"\n"                                                                                                                   \
            "[db]\n"                                                                                                               \
            "mail={\"db-id\":16456,\"db-last-system-id\":99999}\n"                                                                 \
            "postgres={\"db-id\":12173,\"db-last-system-id\":99999}\n"                                                             \
            "template0={\"db-id\":12168,\"db-last-system-id\":99999}\n"                                                            \
            "template1={\"db-id\":1,\"db-last-system-id\":99999}\n"                                                                \

        #define TEST_MANIFEST_FILE                                                                                                 \
            "\n"                                                                                                                   \
            "[target:file]\n"                                                                                                      \
            "pg_data/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\""                                        \
                ",\"reference\":\"20190818-084502F_20190819-084506D\",\"size\":4,\"timestamp\":1565282114}\n"                      \
            "pg_data/base/16384/17000={\"checksum\":\"e0101dd8ffb910c9c202ca35b5f828bcb9697bed\",\"checksum-page\":false"          \
                ",\"checksum-page-error\":[1],\"repo-size\":4096,\"size\":8192,\"timestamp\":1565282114}\n"                        \
            "pg_data/base/16384/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\",\"group\":false,\"size\":4"  \
                ",\"timestamp\":1565282115}\n"                                                                                     \
            "pg_data/base/32768/33000={\"checksum\":\"7a16d165e4775f7c92e8cdf60c0af57313f0bf90\",\"checksum-page\":true"           \
                ",\"reference\":\"20190818-084502F\",\"size\":1073741824,\"timestamp\":1565282116}\n"                              \
            "pg_data/base/32768/33000.32767={\"checksum\":\"6e99b589e550e68e934fd235ccba59fe5b592a9e\",\"checksum-page\":true"     \
                ",\"reference\":\"20190818-084502F\",\"size\":32768,\"timestamp\":1565282114}\n"                                   \
            "pg_data/postgresql.conf={\"checksum\":\"6721d92c9fcdf4248acff1f9a1377127d9064807\",\"size\":4457"                     \
                ",\"timestamp\":1565282114}\n"                                                                                     \
            "pg_data/special={\"mode\":\"0640\",\"size\":0,\"timestamp\":1565282120,\"user\":false}\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_FILE_DEFAULT</name></cpp:macro>                                                                                         \
            <cpp:value>"\n"                                                                                                                   \
            "[target:file:default]\n"                                                                                              \
            "group=\"group1\"\n"                                                                                                   \
            "mode=\"0600\"\n"                                                                                                      \
            "user=\"user1\"\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_LINK</name></cpp:macro>                                                                                                 \
            <cpp:value>"\n"                                                                                                                   \
            "[target:link]\n"                                                                                                      \
            "pg_data/pg_stat={\"destination\":\"../pg_stat\"}\n"                                                                   \
            "pg_data/postgresql.conf={\"destination\":\"../pg_config/postgresql.conf\",\"group\":false,\"user\":\"user1\"}\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_LINK_DEFAULT</name></cpp:macro>                                                                                         \
            <cpp:value>"\n"                                                                                                                   \
            "[target:link:default]\n"                                                                                              \
            "group=\"group1\"\n"                                                                                                   \
            "user=false\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_PATH</name></cpp:macro>                                                                                                 \
            <cpp:value>"\n"                                                                                                                   \
            "[target:path]\n"                                                                                                      \
            "pg_data={\"user\":\"user2\"}\n"                                                                                       \
            "pg_data/base={\"group\":\"group2\"}\n"                                                                                \
            "pg_data/base/16384={\"mode\":\"0750\"}\n"                                                                             \
            "pg_data/base/32768={}\n"                                                                                              \
            "pg_data/base/65536={\"user\":false}\n"</cpp:value></cpp:define>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_PATH_DEFAULT</name></cpp:macro>                                                                                         \
            <cpp:value>"\n"                                                                                                                   \
            "[target:path:default]\n"                                                                                              \
            "group=false\n"                                                                                                        \
            "mode=\"0700\"\n"                                                                                                      \
            "user=\"user1\"\n"</cpp:value></cpp:define>

        <macro><name>HRN_INFO_PUT</name><argument_list>(
            <argument>storageTest</argument>, <argument>TEST_PATH <literal type="string">"/repo/"</literal> STORAGE_PATH_BACKUP <literal type="string">"/stanza1/20181119-152138F_20181119-152155I/"</literal> BACKUP_MANIFEST_FILE</argument>,
            <argument>TEST_MANIFEST_HEADER
            TEST_MANIFEST_TARGET
            TEST_MANIFEST_DB
            TEST_MANIFEST_FILE
            TEST_MANIFEST_FILE_DEFAULT
            TEST_MANIFEST_LINK
            TEST_MANIFEST_LINK_DEFAULT
            TEST_MANIFEST_PATH
            TEST_MANIFEST_PATH_DEFAULT</argument>,
            <argument>.comment = <literal type="string">"write manifest - stanza1, repo1"</literal></argument>)</argument_list></macro><empty_stmt>;</empty_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza2/"</literal> <name>INFO_ARCHIVE_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6625633699176220261\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6625633699176220261,\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file - stanza2, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza2/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6625633699176220261\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6625633699176220261,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file - stanza2, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Write encrypted info files to encrypted repo2</comment>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza1/"</literal> <name>INFO_ARCHIVE_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\""</literal> <name>TEST_CIPHER_PASS_ARCHIVE</name> <literal type="string">"\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6626363367545678089,\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>cipherType</name> <operator>=</operator> <name>cipherTypeAes256Cbc</name></expr></argument>, <argument><expr><operator>.</operator><name>cipherPass</name> <operator>=</operator> <name>TEST_CIPHER_PASS</name></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write encrypted archive.info, stanza1, repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza1/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201510051\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201116-200000F={\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000004\",\"backup-archive-stop\":\"000000010000000000000004\","</literal>
            <literal type="string">"\"backup-error\":true,"</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605556800,\"backup-timestamp-stop\":1605556805,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":true,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":true,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\"somepass\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201510051,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>cipherType</name> <operator>=</operator> <name>cipherTypeAes256Cbc</name></expr></argument>, <argument><expr><operator>.</operator><name>cipherPass</name> <operator>=</operator> <name>TEST_CIPHER_PASS</name></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write encrypted backup.info, stanza1, repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Add WAL on repo1 and encrypted repo2 for stanza1</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-2/0000000100000000/000000010000000000000002-ac61b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-2/0000000100000000/000000010000000000000003-37dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-2/0000000100000000/000000010000000000000004-ee61b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-2/0000000100000000/000000010000000000000005-abc123f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-1/0000000100000000/000000010000000000000003-37dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza1/9.5-1/0000000100000000/000000010000000000000004-ff61b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Add a manifest on the encrypted repo2</comment>
        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_HEADER2</name></cpp:macro>                                                                                              \
            <cpp:value>"[backup]\n"                                                                                                           \
            "backup-archive-start=\"000000010000000000000004\"\n"                                                                  \
            "backup-archive-stop=\"000000010000000000000004\"\n"                                                                   \
            "backup-label=\"20201116-200000F\"\n"                                                                                  \
            "backup-timestamp-copy-start=1605556800\n"                                                                             \
            "backup-timestamp-start=1605556800\n"                                                                                  \
            "backup-timestamp-stop=1605556802\n"                                                                                   \
            "backup-type=\"full\"\n"                                                                                               \
            "\n"                                                                                                                   \
            "[backup:db]\n"                                                                                                        \
            "db-catalog-version=201510051\n"                                                                                       \
            "db-control-version=942\n"                                                                                             \
            "db-id=1\n"                                                                                                            \
            "db-system-id=6626363367545678089\n"                                                                                   \
            "db-version=\"9.5\"\n"                                                                                                 \
            "\n"                                                                                                                   \
            "[backup:option]\n"                                                                                                    \
            "option-archive-check=true\n"                                                                                          \
            "option-archive-copy=true\n"                                                                                           \
            "option-backup-standby=true\n"                                                                                         \
            "option-buffer-size=16384\n"                                                                                           \
            "option-checksum-page=false\n"                                                                                         \
            "option-compress=false\n"                                                                                              \
            "option-compress-level=3\n"                                                                                            \
            "option-compress-level-network=3\n"                                                                                    \
            "option-delta=false\n"                                                                                                 \
            "option-hardlink=true\n"                                                                                               \
            "option-online=true\n"                                                                                                 \
            "option-process-max=32\n"</cpp:value></cpp:define>                                                                                              \

        <comment type="line">// Create encrypted manifest file</comment>
        <macro><name>HRN_INFO_PUT</name><argument_list>(
            <argument>storageTest</argument>, <argument>TEST_PATH <literal type="string">"/repo2/"</literal> STORAGE_PATH_BACKUP <literal type="string">"/stanza1/20201116-200000F/"</literal> BACKUP_MANIFEST_FILE</argument>,
            <argument>TEST_MANIFEST_HEADER2
            TEST_MANIFEST_TARGET
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\"someotherpass\"\n"</literal>
            TEST_MANIFEST_DB
            TEST_MANIFEST_FILE
            TEST_MANIFEST_FILE_DEFAULT
            TEST_MANIFEST_LINK
            TEST_MANIFEST_LINK_DEFAULT
            TEST_MANIFEST_PATH
            TEST_MANIFEST_PATH_DEFAULT</argument>,
            <argument>.cipherType = cipherTypeAes256Cbc</argument>, <argument>.cipherPass = <literal type="string">"somepass"</literal></argument>,
            <argument>.comment = <literal type="string">"write encrypted manifest, stanza1, repo2"</literal></argument>)</argument_list></macro><empty_stmt>;</empty_stmt>

        <comment type="line">// Create a stanza on repo2 that is not on repo1</comment>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name> <literal type="string">"/stanza3/"</literal> <name>INFO_ARCHIVE_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\""</literal> <name>TEST_CIPHER_PASS_ARCHIVE</name> <literal type="string">"\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6626363367545678089,\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>cipherType</name> <operator>=</operator> <name>cipherTypeAes256Cbc</name></expr></argument>, <argument><expr><operator>.</operator><name>cipherPass</name> <operator>=</operator> <name>TEST_CIPHER_PASS</name></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write encrypted archive.info, repo2, stanza3"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza3/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201110-100000F={\"backrest-format\":5,\"backrest-version\":\"2.25\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000001\",\"backup-archive-stop\":\"000000010000000000000002\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605002400,\"backup-timestamp-stop\":1605002402,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":true,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":true,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\"somepass\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>cipherType</name> <operator>=</operator> <name>cipherTypeAes256Cbc</name></expr></argument>, <argument><expr><operator>.</operator><name>cipherPass</name> <operator>=</operator> <name>TEST_CIPHER_PASS</name></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"write encrypted backup.info, repo2, stanza3"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Store some WAL in stanza on repo2 that is not on repo1</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza3/9.4-1/0000000100000000/000000010000000000000001-11dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2/"</literal> <name>STORAGE_PATH_ARCHIVE</name>
            <literal type="string">"/stanza3/9.4-1/0000000100000000/000000010000000000000002-2261b8f1ec7b1e6c3eaee9345214595eb7daa9a1.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Set up the configuration</comment>
        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argListMultiRepo</name> <init>= <expr><call><name>strLstNew</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawStrId</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>, <argument><expr><name>cfgOptRepoCipherType</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>cipherTypeAes256Cbc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgEnvKeyRawZ</name><argument_list>(<argument><expr><name>cfgOptRepoCipherPass</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_CIPHER_PASS</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argListMultiRepoJson</name> <init>= <expr><call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argListMultiRepoJson</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <macro><name>HRN_FORK_BEGIN</name><argument_list>()</argument_list></macro>
        <block>{<block_content>
            <macro><name>HRN_FORK_CHILD_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <expr_stmt><expr><call><name>TEST_RESULT_INT_NE</name><argument_list>(
                    <argument><expr><call><name>lockAcquire</name><argument_list>(<argument><expr><call><name>cfgOptionStr</name><argument_list>(<argument><expr><name>cfgOptLockPath</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"stanza2"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"999-ffffffff"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><name>true</name></expr></argument>)</argument_list></call></expr></argument>,
                    <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="string">"create backup/expire lock"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_VOID</name><argument_list>(<argument><expr><call><name>lockWriteDataP</name><argument_list>(<argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><operator>.</operator><name>percentComplete</name> <operator>=</operator> <call><name>VARUINT</name><argument_list>(<argument><expr><literal type="number">4545</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"write lock data"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify parent that lock has been acquired</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_PUT</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Wait for parent to allow release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_GET</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>lockRelease</name><argument_list>(<argument><expr><name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_CHILD_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

            <macro><name>HRN_FORK_PARENT_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <comment type="line">// Wait for child to acquire lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_GET</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListMultiRepoJson</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"["</literal>
                        <literal type="string">"{"</literal>
                             <literal type="string">"\"archive\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-1\","</literal>
                                    <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":2,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.5-2\","</literal>
                                    <literal type="string">"\"max\":\"000000010000000000000005\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":2"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.5-1\","</literal>
                                    <literal type="string">"\"max\":\"000000010000000000000004\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000003\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"backup\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000002\","</literal>
                                        <literal type="string">"\"stop\":\"000000010000000000000002\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.08dev\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":20162900,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":2369186,"</literal>
                                            <literal type="string">"\"size\":2369186"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":20162900"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20181119-152138F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1542640898,"</literal>
                                        <literal type="string">"\"stop\":1542640899"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000003\","</literal>
                                        <literal type="string">"\"stop\":\"000000020000000000000003\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.08dev\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":8428,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":346,"</literal>
                                            <literal type="string">"\"size\":2369186"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":20162900"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20181119-152138F_20181119-152152D\","</literal>
                                    <literal type="string">"\"prior\":\"20181119-152138F\","</literal>
                                    <literal type="string">"\"reference\":["</literal>
                                        <literal type="string">"\"20181119-152138F\""</literal>
                                    <literal type="string">"],"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1542640912,"</literal>
                                        <literal type="string">"\"stop\":1542640915"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"diff\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000003\","</literal>
                                        <literal type="string">"\"stop\":null"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.08dev\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":8428,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":346,"</literal>
                                            <literal type="string">"\"size\":2369186"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":20162900"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20181119-152138F_20181119-152155I\","</literal>
                                    <literal type="string">"\"lsn\":{"</literal>
                                        <literal type="string">"\"start\":\"285/89000028\","</literal>
                                        <literal type="string">"\"stop\":\"285/89001F88\"},"</literal>
                                    <literal type="string">"\"prior\":\"20181119-152138F_20181119-152152D\","</literal>
                                    <literal type="string">"\"reference\":["</literal>
                                        <literal type="string">"\"20181119-152138F\","</literal>
                                        <literal type="string">"\"20181119-152138F_20181119-152152D\""</literal>
                                    <literal type="string">"],"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1542640915,"</literal>
                                        <literal type="string">"\"stop\":1542640917"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"incr\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000002\","</literal>
                                        <literal type="string">"\"stop\":\"000000010000000000000003\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.30\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":2,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":26897020,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":3100,"</literal>
                                            <literal type="string">"\"size\":3159000"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":26897000"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20201116-155000F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1605541800,"</literal>
                                        <literal type="string">"\"stop\":1605541802"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000004\","</literal>
                                        <literal type="string">"\"stop\":\"000000010000000000000004\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.30\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":2"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"error\":true,"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":26897020,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":3100,"</literal>
                                            <literal type="string">"\"size\":3159000"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":26897000"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20201116-200000F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1605556800,"</literal>
                                        <literal type="string">"\"stop\":1605556805"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"annotation\":{"</literal>
                                        <literal type="string">"\"extra key\":\"this is an annotation\","</literal>
                                        <literal type="string">"\"source\":\"this is another annotation\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000005\","</literal>
                                        <literal type="string">"\"stop\":\"000000010000000000000005\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.30\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":2,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"error\":false,"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":8428,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":346,"</literal>
                                            <literal type="string">"\"size\":2369186"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":20162900"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20201116-155000F_20201119-152100I\","</literal>
                                    <literal type="string">"\"prior\":\"20201116-155000F\","</literal>
                                    <literal type="string">"\"reference\":["</literal>
                                        <literal type="string">"\"20201116-155000F\""</literal>
                                    <literal type="string">"],"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1605799260,"</literal>
                                        <literal type="string">"\"stop\":1605799263"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"incr\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"cipher\":\"mixed\","</literal>
                             <literal type="string">"\"db\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6625592122879095702,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":2,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                                    <literal type="string">"\"version\":\"9.5\""</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":2,"</literal>
                                    <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                                    <literal type="string">"\"version\":\"9.5\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"name\":\"stanza1\","</literal>
                            <literal type="string">"\"repo\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"none\","</literal>
                                    <literal type="string">"\"key\":1,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":0,"</literal>
                                        <literal type="string">"\"message\":\"ok\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                                    <literal type="string">"\"key\":2,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":0,"</literal>
                                        <literal type="string">"\"message\":\"ok\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                             <literal type="string">"\"archive\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":1"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-1\","</literal>
                                    <literal type="string">"\"max\":null,"</literal>
                                    <literal type="string">"\"min\":null"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"backup\":[],"</literal>
                             <literal type="string">"\"cipher\":\"mixed\","</literal>
                             <literal type="string">"\"db\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":1,"</literal>
                                    <literal type="string">"\"system-id\":6625633699176220261,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"name\":\"stanza2\","</literal>
                            <literal type="string">"\"repo\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"none\","</literal>
                                    <literal type="string">"\"key\":1,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":2,"</literal>
                                        <literal type="string">"\"message\":\"no valid backups\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                                    <literal type="string">"\"key\":2,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":1,"</literal>
                                        <literal type="string">"\"message\":\"missing stanza path\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":4,"</literal>
                                <literal type="string">"\"lock\":{\"backup\":{\"held\":true}},"</literal>
                                <literal type="string">"\"message\":\"different across repos\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                             <literal type="string">"\"archive\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":2"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"id\":\"9.4-1\","</literal>
                                    <literal type="string">"\"max\":\"000000010000000000000002\","</literal>
                                    <literal type="string">"\"min\":\"000000010000000000000001\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"backup\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"archive\":{"</literal>
                                        <literal type="string">"\"start\":\"000000010000000000000001\","</literal>
                                        <literal type="string">"\"stop\":\"000000010000000000000002\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"backrest\":{"</literal>
                                        <literal type="string">"\"format\":5,"</literal>
                                        <literal type="string">"\"version\":\"2.25\""</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"database\":{"</literal>
                                        <literal type="string">"\"id\":1,"</literal>
                                        <literal type="string">"\"repo-key\":2"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"info\":{"</literal>
                                        <literal type="string">"\"delta\":26897020,"</literal>
                                        <literal type="string">"\"repository\":{"</literal>
                                            <literal type="string">"\"delta\":3100,"</literal>
                                            <literal type="string">"\"size\":3159000"</literal>
                                        <literal type="string">"},"</literal>
                                        <literal type="string">"\"size\":26897000"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"label\":\"20201110-100000F\","</literal>
                                    <literal type="string">"\"prior\":null,"</literal>
                                    <literal type="string">"\"reference\":null,"</literal>
                                    <literal type="string">"\"timestamp\":{"</literal>
                                        <literal type="string">"\"start\":1605002400,"</literal>
                                        <literal type="string">"\"stop\":1605002402"</literal>
                                    <literal type="string">"},"</literal>
                                    <literal type="string">"\"type\":\"full\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                             <literal type="string">"\"cipher\":\"mixed\","</literal>
                             <literal type="string">"\"db\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"id\":1,"</literal>
                                    <literal type="string">"\"repo-key\":2,"</literal>
                                    <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                                    <literal type="string">"\"version\":\"9.4\""</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"name\":\"stanza3\","</literal>
                            <literal type="string">"\"repo\":["</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"none\","</literal>
                                    <literal type="string">"\"key\":1,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":1,"</literal>
                                        <literal type="string">"\"message\":\"missing stanza path\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"{"</literal>
                                    <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                                    <literal type="string">"\"key\":2,"</literal>
                                    <literal type="string">"\"status\":{"</literal>
                                        <literal type="string">"\"code\":0,"</literal>
                                        <literal type="string">"\"message\":\"ok\""</literal>
                                    <literal type="string">"}"</literal>
                                <literal type="string">"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":4,"</literal>
                                <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                                <literal type="string">"\"message\":\"different across repos\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"]"</literal></expr></argument>,
                    <argument><expr><literal type="string">"json - multiple stanzas, some with valid backups, archives in latest DB, backup lock held on one stanza"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify child to release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_PUT</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_PARENT_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <expr_stmt><expr><call><name>HRN_FORK_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

        <macro><name>HRN_FORK_BEGIN</name><argument_list>()</argument_list></macro>
        <block>{<block_content>
            <macro><name>HRN_FORK_CHILD_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <expr_stmt><expr><call><name>TEST_RESULT_INT_NE</name><argument_list>(
                    <argument><expr><call><name>lockAcquire</name><argument_list>(<argument><expr><call><name>cfgOptionStr</name><argument_list>(<argument><expr><name>cfgOptLockPath</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"stanza2"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><call><name>STRDEF</name><argument_list>(<argument><expr><literal type="string">"999-ffffffff"</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><name>true</name></expr></argument>)</argument_list></call></expr></argument>,
                    <argument><expr><operator>-</operator><literal type="number">1</literal></expr></argument>, <argument><expr><literal type="string">"create backup/expire lock"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_VOID</name><argument_list>(<argument><expr><call><name>lockWriteDataP</name><argument_list>(<argument><expr><name>lockTypeBackup</name></expr></argument>, <argument><expr><operator>.</operator><name>percentComplete</name> <operator>=</operator> <call><name>VARUINT</name><argument_list>(<argument><expr><literal type="number">5555</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"write lock data"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify parent that lock has been acquired</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_PUT</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Wait for parent to allow release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_CHILD_NOTIFY_GET</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>lockRelease</name><argument_list>(<argument><expr><name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_CHILD_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

            <macro><name>HRN_FORK_PARENT_BEGIN</name><argument_list>()</argument_list></macro>
            <block>{<block_content>
                <comment type="line">// Wait for child to acquire lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_GET</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
                    <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
                    <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
                    <literal type="string">"    status: ok\n"</literal>
                    <literal type="string">"    cipher: mixed\n"</literal>
                    <literal type="string">"        repo1: none\n"</literal>
                    <literal type="string">"        repo2: aes-256-cbc\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (prior)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20181119-152138F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:38 / 2018-11-19 15:21:39\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000002\n"</literal>
                    <literal type="string">"            database size: 19.2MB, database backup size: 19.2MB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 2.3MB\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        diff backup: 20181119-152138F_20181119-152152D\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:52 / 2018-11-19 15:21:55\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000003 / 000000020000000000000003\n"</literal>
                    <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
                    <literal type="string">"            backup reference list: 20181119-152138F\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
                    <literal type="string">"            wal start/stop: n/a\n"</literal>
                    <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
                    <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (current)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20201116-155000F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
                    <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20201116-200000F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2020-11-16 20:00:00 / 2020-11-16 20:00:05\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000004 / 000000010000000000000004\n"</literal>
                    <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
                    <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
                    <literal type="string">"            error(s) detected during backup\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        incr backup: 20201116-155000F_20201119-152100I\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2020-11-19 15:21:00 / 2020-11-19 15:21:03\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000005 / 000000010000000000000005\n"</literal>
                    <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
                    <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
                    <literal type="string">"            backup reference list: 20201116-155000F\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"stanza: stanza2\n"</literal>
                    <literal type="string">"    status: mixed (backup/expire running - 55.55% complete)\n"</literal>
                    <literal type="string">"        repo1: error (no valid backups)\n"</literal>
                    <literal type="string">"        repo2: error (missing stanza path)\n"</literal>
                    <literal type="string">"    cipher: mixed\n"</literal>
                    <literal type="string">"        repo1: none\n"</literal>
                    <literal type="string">"        repo2: aes-256-cbc\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (current)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.4): none present\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"stanza: stanza3\n"</literal>
                    <literal type="string">"    status: mixed\n"</literal>
                    <literal type="string">"        repo1: error (missing stanza path)\n"</literal>
                    <literal type="string">"        repo2: ok\n"</literal>
                    <literal type="string">"    cipher: mixed\n"</literal>
                    <literal type="string">"        repo1: none\n"</literal>
                    <literal type="string">"        repo2: aes-256-cbc\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"    db (current)\n"</literal>
                    <literal type="string">"        wal archive min/max (9.4): 000000010000000000000001/000000010000000000000002\n"</literal>
                    <literal type="string">"\n"</literal>
                    <literal type="string">"        full backup: 20201110-100000F\n"</literal>
                    <literal type="string">"            timestamp start/stop: 2020-11-10 10:00:00 / 2020-11-10 10:00:02\n"</literal>
                    <literal type="string">"            wal start/stop: 000000010000000000000001 / 000000010000000000000002\n"</literal>
                    <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
                    <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
                    <argument><expr><literal type="string">"text - multiple stanzas, multi-repo with valid backups, backup lock held on one stanza"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <comment type="line">// Notify child to release lock</comment>
                <expr_stmt><expr><call><name>HRN_FORK_PARENT_NOTIFY_PUT</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            </block_content>}</block>
            <expr_stmt><expr><call><name>HRN_FORK_PARENT_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        </block_content>}</block>
        <expr_stmt><expr><call><name>HRN_FORK_END</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo: stanza exists but requested backup does not"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"bogus"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (requested backup not found)\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text, multi-repo, backup not found"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":[],"</literal>
                    <literal type="string">"\"backup\":[],"</literal>
                    <literal type="string">"\"cipher\":\"mixed\","</literal>
                    <literal type="string">"\"db\":[],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":6,"</literal>
                                <literal type="string">"\"message\":\"requested backup not found\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                            <literal type="string">"\"key\":2,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":6,"</literal>
                                <literal type="string">"\"message\":\"requested backup not found\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":6,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"requested backup not found\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json, multi-repo, backup not found"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo: backup set requested on single repo, with 1 checksum error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20181119-152138F_20181119-152155I"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
            <literal type="string">"            wal start/stop: n/a\n"</literal>
            <literal type="string">"            lsn start/stop: 285/89000028 / 285/89001F88\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"            database list: mail (16456), postgres (12173)\n"</literal>
            <literal type="string">"            symlinks:\n"</literal>
            <literal type="string">"                pg_hba.conf =&gt; ../pg_config/pg_hba.conf\n"</literal>
            <literal type="string">"                pg_stat =&gt; ../pg_stat\n"</literal>
            <literal type="string">"            tablespaces:\n"</literal>
            <literal type="string">"                ts1 (1) =&gt; /tblspc/ts1\n"</literal>
            <literal type="string">"                ts12 (12) =&gt; /tblspc/ts12\n"</literal>
            <literal type="string">"            error list: base/16384/17000\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - backup set requested"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":2,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.5-2\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000005\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"backup\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000003\","</literal>
                                <literal type="string">"\"stop\":null"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.08dev\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database-ref\":["</literal>
                                <literal type="string">"{\"name\":\"mail\",\"oid\":16456},"</literal>
                                <literal type="string">"{\"name\":\"postgres\",\"oid\":12173}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"error\":true,"</literal>
                            <literal type="string">"\"error-list\":[\"base/16384/17000\"],"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":8428,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":346,"</literal>
                                    <literal type="string">"\"size\":2369186"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":20162900"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20181119-152138F_20181119-152155I\","</literal>
                            <literal type="string">"\"link\":["</literal>
                                <literal type="string">"{\"destination\":\"../pg_config/pg_hba.conf\",\"name\":\"pg_hba.conf\"},"</literal>
                                <literal type="string">"{\"destination\":\"../pg_stat\",\"name\":\"pg_stat\"}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"lsn\":{\"start\":\"285/89000028\",\"stop\":\"285/89001F88\"},"</literal>
                            <literal type="string">"\"prior\":\"20181119-152138F_20181119-152152D\","</literal>
                            <literal type="string">"\"reference\":[\"20181119-152138F\",\"20181119-152138F_20181119-152152D\"],"</literal>
                            <literal type="string">"\"tablespace\":["</literal>
                                <literal type="string">"{\"destination\":\"/tblspc/ts1\",\"name\":\"ts1\",\"oid\":1},"</literal>
                                <literal type="string">"{\"destination\":\"/tblspc/ts12\",\"name\":\"ts12\",\"oid\":12}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1542640915,"</literal>
                                <literal type="string">"\"stop\":1542640917"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"incr\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6625592122879095702,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":2,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                            <literal type="string">"\"version\":\"9.5\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":0,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"ok\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - backup set requested"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo: filter by backup type"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptType</name></expr></argument>, <argument><expr><literal type="string">"full"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20181119-152138F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:38 / 2018-11-19 15:21:39\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 19.2MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 2.3MB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-200000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 20:00:00 / 2020-11-16 20:00:05\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000004 / 000000010000000000000004\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"            error(s) detected during backup\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, filter by backup type"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo: read encrypted manifest and confirm requested database found without setting --repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20201116-200000F"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-200000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 20:00:00 / 2020-11-16 20:00:05\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000004 / 000000010000000000000004\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"            database list: mail (16456), postgres (12173)\n"</literal>
            <literal type="string">"            symlinks:\n"</literal>
            <literal type="string">"                pg_hba.conf =&gt; ../pg_config/pg_hba.conf\n"</literal>
            <literal type="string">"                pg_stat =&gt; ../pg_stat\n"</literal>
            <literal type="string">"            tablespaces:\n"</literal>
            <literal type="string">"                ts1 (1) =&gt; /tblspc/ts1\n"</literal>
            <literal type="string">"                ts12 (12) =&gt; /tblspc/ts12\n"</literal>
            <literal type="string">"            error list: base/16384/17000\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, backup set requested, found on repo2, report stanza and db over all repos"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
           <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
           <argument><expr><literal type="string">"["</literal>
               <literal type="string">"{"</literal>
                   <literal type="string">"\"archive\":["</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"database\":{"</literal>
                               <literal type="string">"\"id\":1,"</literal>
                               <literal type="string">"\"repo-key\":1"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"id\":\"9.4-1\","</literal>
                           <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                           <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                       <literal type="string">"},"</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"database\":{"</literal>
                               <literal type="string">"\"id\":2,"</literal>
                               <literal type="string">"\"repo-key\":1"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"id\":\"9.5-2\","</literal>
                           <literal type="string">"\"max\":\"000000010000000000000005\","</literal>
                           <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                       <literal type="string">"},"</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"database\":{"</literal>
                               <literal type="string">"\"id\":1,"</literal>
                               <literal type="string">"\"repo-key\":2"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"id\":\"9.5-1\","</literal>
                           <literal type="string">"\"max\":\"000000010000000000000004\","</literal>
                           <literal type="string">"\"min\":\"000000010000000000000003\""</literal>
                       <literal type="string">"}"</literal>
                   <literal type="string">"],"</literal>
                   <literal type="string">"\"backup\":["</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"archive\":{"</literal>
                               <literal type="string">"\"start\":\"000000010000000000000004\","</literal>
                               <literal type="string">"\"stop\":\"000000010000000000000004\""</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"backrest\":{"</literal>
                               <literal type="string">"\"format\":5,"</literal>
                               <literal type="string">"\"version\":\"2.30\""</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"database\":{"</literal>
                               <literal type="string">"\"id\":1,"</literal>
                               <literal type="string">"\"repo-key\":2"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"database-ref\":["</literal>
                               <literal type="string">"{\"name\":\"mail\",\"oid\":16456},"</literal>
                               <literal type="string">"{\"name\":\"postgres\",\"oid\":12173}"</literal>
                           <literal type="string">"],"</literal>
                           <literal type="string">"\"error\":true,"</literal>
                           <literal type="string">"\"error-list\":[\"base/16384/17000\"],"</literal>
                           <literal type="string">"\"info\":{"</literal>
                               <literal type="string">"\"delta\":26897020,"</literal>
                               <literal type="string">"\"repository\":{"</literal>
                                   <literal type="string">"\"delta\":3100,"</literal>
                                   <literal type="string">"\"size\":3159000"</literal>
                               <literal type="string">"},"</literal>
                               <literal type="string">"\"size\":26897000"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"label\":\"20201116-200000F\","</literal>
                           <literal type="string">"\"link\":["</literal>
                               <literal type="string">"{\"destination\":\"../pg_config/pg_hba.conf\",\"name\":\"pg_hba.conf\"},"</literal>
                               <literal type="string">"{\"destination\":\"../pg_stat\",\"name\":\"pg_stat\"}"</literal>
                           <literal type="string">"],"</literal>
                           <literal type="string">"\"prior\":null,"</literal>
                           <literal type="string">"\"reference\":null,"</literal>
                           <literal type="string">"\"tablespace\":["</literal>
                               <literal type="string">"{\"destination\":\"/tblspc/ts1\",\"name\":\"ts1\",\"oid\":1},"</literal>
                               <literal type="string">"{\"destination\":\"/tblspc/ts12\",\"name\":\"ts12\",\"oid\":12}"</literal>
                           <literal type="string">"],"</literal>
                           <literal type="string">"\"timestamp\":{"</literal>
                               <literal type="string">"\"start\":1605556800,"</literal>
                               <literal type="string">"\"stop\":1605556805"</literal>
                           <literal type="string">"},"</literal>
                           <literal type="string">"\"type\":\"full\""</literal>
                       <literal type="string">"}"</literal>
                   <literal type="string">"],"</literal>
                   <literal type="string">"\"cipher\":\"mixed\","</literal>
                   <literal type="string">"\"db\":["</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"id\":1,"</literal>
                           <literal type="string">"\"repo-key\":1,"</literal>
                           <literal type="string">"\"system-id\":6625592122879095702,"</literal>
                           <literal type="string">"\"version\":\"9.4\""</literal>
                       <literal type="string">"},"</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"id\":2,"</literal>
                           <literal type="string">"\"repo-key\":1,"</literal>
                           <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                           <literal type="string">"\"version\":\"9.5\""</literal>
                       <literal type="string">"},"</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"id\":1,"</literal>
                           <literal type="string">"\"repo-key\":2,"</literal>
                           <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                           <literal type="string">"\"version\":\"9.5\""</literal>
                       <literal type="string">"}"</literal>
                   <literal type="string">"],"</literal>
                   <literal type="string">"\"name\":\"stanza1\","</literal>
                   <literal type="string">"\"repo\":["</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"cipher\":\"none\","</literal>
                           <literal type="string">"\"key\":1,"</literal>
                           <literal type="string">"\"status\":{"</literal>
                               <literal type="string">"\"code\":0,"</literal>
                               <literal type="string">"\"message\":\"ok\""</literal>
                           <literal type="string">"}"</literal>
                       <literal type="string">"},"</literal>
                       <literal type="string">"{"</literal>
                           <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                           <literal type="string">"\"key\":2,"</literal>
                           <literal type="string">"\"status\":{"</literal>
                               <literal type="string">"\"code\":0,"</literal>
                               <literal type="string">"\"message\":\"ok\""</literal>
                           <literal type="string">"}"</literal>
                       <literal type="string">"}"</literal>
                   <literal type="string">"],"</literal>
                   <literal type="string">"\"status\":{"</literal>
                       <literal type="string">"\"code\":0,"</literal>
                       <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                       <literal type="string">"\"message\":\"ok\""</literal>
                   <literal type="string">"}"</literal>
               <literal type="string">"}"</literal>
           <literal type="string">"]"</literal></expr></argument>,
           <argument><expr><literal type="string">"json - multi-repo, backup set requested, found on repo2, report stanza and db over all repos"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"backup set requested but no links, multiple checksum errors"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Remove the environment variable so config system will only count one repo</comment>
        <expr_stmt><expr><call><name>hrnCfgEnvKeyRemoveRaw</name><argument_list>(<argument><expr><name>cfgOptRepoCipherPass</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20181119-152138F_20181119-152155I"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_TARGET_NO_LINK</name></cpp:macro>                                                                                       \
            <cpp:value>"\n"                                                                                                                   \
            "[backup:target]\n"                                                                                                    \
            "pg_data={\"path\":\"/pg/base\",\"type\":\"path\"}\n"                                                                  \

        #define TEST_MANIFEST_FILE_MULTIPLE_CHECKSUM_ERRORS                                                                        \
        "\n"                                                                                                                       \
        "[target:file]\n"                                                                                                          \
        "pg_data/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\""                                            \
            ",\"reference\":\"20190818-084502F_20190819-084506D\",\"size\":4,\"timestamp\":1565282114}\n"                          \
        "pg_data/base/16384/17000={\"checksum\":\"e0101dd8ffb910c9c202ca35b5f828bcb9697bed\",\"checksum-page\":false"              \
            ",\"checksum-page-error\":[1],\"repo-size\":4096,\"size\":8192,\"timestamp\":1565282114}\n"                            \
        "pg_data/base/16384/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\",\"group\":false,\"size\":4"      \
            ",\"timestamp\":1565282115}\n"                                                                                         \
        "pg_data/base/32768/33000={\"checksum\":\"7a16d165e4775f7c92e8cdf60c0af57313f0bf90\",\"checksum-page\":false"              \
            ",\"reference\":\"20190818-084502F\",\"size\":1073741824,\"timestamp\":1565282116}\n"                                  \
        "pg_data/base/32768/33000.32767={\"checksum\":\"6e99b589e550e68e934fd235ccba59fe5b592a9e\",\"checksum-page\":true"         \
            ",\"reference\":\"20190818-084502F\",\"size\":32768,\"timestamp\":1565282114}\n"                                       \
        "pg_data/postgresql.conf={\"checksum\":\"6721d92c9fcdf4248acff1f9a1377127d9064807\",\"size\":4457"                         \
            ",\"timestamp\":1565282114}\n"                                                                                         \
        "pg_data/special={\"mode\":\"0640\",\"size\":0,\"timestamp\":1565282120,\"user\":false}\n"</cpp:value></cpp:define>

        <macro><name>HRN_INFO_PUT</name><argument_list>(
             <argument>storageRepoWrite()</argument>, <argument>STORAGE_REPO_BACKUP <literal type="string">"/20181119-152138F_20181119-152155I/"</literal> BACKUP_MANIFEST_FILE</argument>,
            <argument>TEST_MANIFEST_HEADER
            TEST_MANIFEST_TARGET_NO_LINK
            TEST_MANIFEST_DB
            TEST_MANIFEST_FILE_MULTIPLE_CHECKSUM_ERRORS
            TEST_MANIFEST_FILE_DEFAULT
            TEST_MANIFEST_LINK
            TEST_MANIFEST_LINK_DEFAULT
            TEST_MANIFEST_PATH
            TEST_MANIFEST_PATH_DEFAULT</argument>,
            <argument>.comment = <literal type="string">"write manifest with checksum errors and no links"</literal></argument>)</argument_list></macro><empty_stmt>;</empty_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
            <literal type="string">"            wal start/stop: n/a\n"</literal>
            <literal type="string">"            lsn start/stop: 285/89000028 / 285/89001F88\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"            database list: mail (16456), postgres (12173)\n"</literal>
            <literal type="string">"            error list: base/16384/17000, base/32768/33000\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - backup set requested, no links"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":2,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.5-2\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000005\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"backup\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000003\","</literal>
                                <literal type="string">"\"stop\":null"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.08dev\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database-ref\":["</literal>
                                <literal type="string">"{\"name\":\"mail\",\"oid\":16456},"</literal>
                                <literal type="string">"{\"name\":\"postgres\",\"oid\":12173}"</literal>
                            <literal type="string">"],"</literal>
                            <literal type="string">"\"error\":true,"</literal>
                            <literal type="string">"\"error-list\":[\"base/16384/17000\",\"base/32768/33000\"],"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":8428,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":346,"</literal>
                                    <literal type="string">"\"size\":2369186"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":20162900"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20181119-152138F_20181119-152155I\","</literal>
                            <literal type="string">"\"link\":null,"</literal>
                            <literal type="string">"\"lsn\":{"</literal>
                                <literal type="string">"\"start\":\"285/89000028\","</literal>
                                <literal type="string">"\"stop\":\"285/89001F88\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"prior\":\"20181119-152138F_20181119-152152D\","</literal>
                            <literal type="string">"\"reference\":[\"20181119-152138F\",\"20181119-152138F_20181119-152152D\"],"</literal>
                            <literal type="string">"\"tablespace\":null,"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1542640915,"</literal>
                                <literal type="string">"\"stop\":1542640917"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"incr\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6625592122879095702,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":2,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                            <literal type="string">"\"version\":\"9.5\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":0,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"ok\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - backup set requested, no links"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"backup set requested but no databases, no checksum error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Using the same configuration from previous test</comment>
        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20181119-152138F_20181119-152155I"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST_MANIFEST_NO_DB</name></cpp:macro>                                                                                                \
            <cpp:value>"\n"                                                                                                                   \
            "[db]\n"                                                                                                               \
            "template0={\"db-id\":12168,\"db-last-system-id\":99999}\n"                                                            \
            "template1={\"db-id\":1,\"db-last-system-id\":99999}\n"                                                                \

        #define TEST_MANIFEST_FILE_NO_CHECKSUM_ERROR                                                                               \
        "\n"                                                                                                                       \
        "[target:file]\n"                                                                                                          \
        "pg_data/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\""                                            \
            ",\"reference\":\"20190818-084502F_20190819-084506D\",\"size\":4,\"timestamp\":1565282114}\n"                          \
        "pg_data/base/16384/17000={\"checksum\":\"e0101dd8ffb910c9c202ca35b5f828bcb9697bed\",\"checksum-page\":true"               \
            ",\"checksum-page-error\":[1],\"repo-size\":4096,\"size\":8192,\"timestamp\":1565282114}\n"                            \
        "pg_data/base/16384/PG_VERSION={\"checksum\":\"184473f470864e067ee3a22e64b47b0a1c356f29\",\"group\":false,\"size\":4"      \
            ",\"timestamp\":1565282115}\n"                                                                                         \
        "pg_data/base/32768/33000={\"checksum\":\"7a16d165e4775f7c92e8cdf60c0af57313f0bf90\",\"checksum-page\":true"               \
            ",\"reference\":\"20190818-084502F\",\"size\":1073741824,\"timestamp\":1565282116}\n"                                  \
        "pg_data/base/32768/33000.32767={\"checksum\":\"6e99b589e550e68e934fd235ccba59fe5b592a9e\",\"checksum-page\":true"         \
            ",\"reference\":\"20190818-084502F\",\"size\":32768,\"timestamp\":1565282114}\n"                                       \
        "pg_data/postgresql.conf={\"checksum\":\"6721d92c9fcdf4248acff1f9a1377127d9064807\",\"size\":4457"                         \
            ",\"timestamp\":1565282114}\n"                                                                                         \
        "pg_data/special={\"mode\":\"0640\",\"size\":0,\"timestamp\":1565282120,\"user\":false}\n"</cpp:value></cpp:define>

        <macro><name>HRN_INFO_PUT</name><argument_list>(
            <argument>storageRepoWrite()</argument>, <argument>STORAGE_REPO_BACKUP <literal type="string">"/20181119-152138F_20181119-152155I/"</literal> BACKUP_MANIFEST_FILE</argument>,
            <argument>TEST_MANIFEST_HEADER
            TEST_MANIFEST_TARGET_NO_LINK
            TEST_MANIFEST_NO_DB
            TEST_MANIFEST_FILE_NO_CHECKSUM_ERROR
            TEST_MANIFEST_FILE_DEFAULT
            TEST_MANIFEST_LINK
            TEST_MANIFEST_LINK_DEFAULT
            TEST_MANIFEST_PATH
            TEST_MANIFEST_PATH_DEFAULT</argument>,
            <argument>.comment = <literal type="string">" rewrite same manifest without checksum errors"</literal></argument>)</argument_list></macro><empty_stmt>;</empty_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
            <literal type="string">"            wal start/stop: n/a\n"</literal>
            <literal type="string">"            lsn start/stop: 285/89000028 / 285/89001F88\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"            database list: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - backup set requested, no db and no checksum error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":\"000000020000000000000003\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":2,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.5-2\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000005\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"backup\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000003\","</literal>
                                <literal type="string">"\"stop\":null"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.08dev\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database-ref\":[],"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":8428,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":346,"</literal>
                                    <literal type="string">"\"size\":2369186"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":20162900"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20181119-152138F_20181119-152155I\","</literal>
                            <literal type="string">"\"link\":null,"</literal>
                            <literal type="string">"\"lsn\":{"</literal>
                                <literal type="string">"\"start\":\"285/89000028\","</literal>
                                <literal type="string">"\"stop\":\"285/89001F88\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"prior\":\"20181119-152138F_20181119-152152D\","</literal>
                            <literal type="string">"\"reference\":[\"20181119-152138F\",\"20181119-152138F_20181119-152152D\"],"</literal>
                            <literal type="string">"\"tablespace\":null,"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1542640915,"</literal>
                                <literal type="string">"\"stop\":1542640917"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"incr\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6625592122879095702,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":2,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                            <literal type="string">"\"version\":\"9.5\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"name\":\"stanza1\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":0,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"ok\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - backup set requested, no db and no checksum error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"backup set requested with missing backup lsn stop location"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListTextStanzaOpt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20201116-155000F_20201119-152100I"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <macro><name>HRN_INFO_PUT</name><argument_list>(
            <argument>storageRepoWrite()</argument>, <argument>STORAGE_REPO_BACKUP <literal type="string">"/20201116-155000F_20201119-152100I/"</literal> BACKUP_MANIFEST_FILE</argument>,
            <argument>TEST_MANIFEST_HEADER2
            TEST_MANIFEST_TARGET_NO_LINK
            TEST_MANIFEST_NO_DB
            TEST_MANIFEST_FILE_NO_CHECKSUM_ERROR
            TEST_MANIFEST_FILE_DEFAULT
            TEST_MANIFEST_LINK
            TEST_MANIFEST_LINK_DEFAULT
            TEST_MANIFEST_PATH
            TEST_MANIFEST_PATH_DEFAULT</argument>,
            <argument>.comment = <literal type="string">"write manifest - without lsn info in header"</literal></argument>)</argument_list></macro><empty_stmt>;</empty_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20201116-155000F_20201119-152100I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-19 15:21:00 / 2020-11-19 15:21:03\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000005 / 000000010000000000000005\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20201116-155000F\n"</literal>
            <literal type="string">"            database list: none\n"</literal>
            <literal type="string">"            annotation(s)\n"</literal>
            <literal type="string">"                extra key: this is an annotation\n"</literal>
            <literal type="string">"                source: this is another annotation\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - backup set requested, no lsn start/stop location"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo: stanza found"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Reconfigure environment variable for repo2</comment>
        <expr_stmt><expr><call><name>hrnCfgEnvKeyRawZ</name><argument_list>(<argument><expr><name>cfgOptRepoCipherPass</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_CIPHER_PASS</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepoJson</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                     <literal type="string">"\"archive\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":null,"</literal>
                            <literal type="string">"\"min\":null"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                     <literal type="string">"\"backup\":[],"</literal>
                     <literal type="string">"\"cipher\":\"mixed\","</literal>
                     <literal type="string">"\"db\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6625633699176220261,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"name\":\"stanza2\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":2,"</literal>
                                <literal type="string">"\"message\":\"no valid backups\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                            <literal type="string">"\"key\":2,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":1,"</literal>
                                <literal type="string">"\"message\":\"missing stanza path\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":4,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"different across repos\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - multiple stanzas - selected found, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza2\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (no valid backups)\n"</literal>
            <literal type="string">"        repo2: error (missing stanza path)\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): none present\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multiple stanzas - selected found, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Remove backups from repo2 for stanza1 so multi-repos are scanned but backups are on only 1 repo</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, backups only on one"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201510051\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[cipher]\n"</literal>
            <literal type="string">"cipher-pass=\"somepass\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201510051,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>cipherType</name> <operator>=</operator> <name>cipherTypeAes256Cbc</name></expr></argument>, <argument><expr><operator>.</operator><name>cipherPass</name> <operator>=</operator> <name>TEST_CIPHER_PASS</name></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"backup.info without current, repo2, stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: ok\n"</literal>
            <literal type="string">"        repo2: error (no valid backups)\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000020000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20181119-152138F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:38 / 2018-11-19 15:21:39\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 19.2MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 2.3MB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        diff backup: 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:52 / 2018-11-19 15:21:55\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000003 / 000000020000000000000003\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
            <literal type="string">"            wal start/stop: n/a\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20201116-155000F_20201119-152100I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-19 15:21:00 / 2020-11-19 15:21:03\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000005 / 000000010000000000000005\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20201116-155000F\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, valid backups only on repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Remove archives for prior backup so archiveMin prior DB == NULL but backupList &gt; 0 (edge case)</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, prior backup: no archives but backups (code coverage)"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_REMOVE</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1"</literal></expr></argument>, <argument><expr><operator>.</operator><name>recurse</name> <operator>=</operator> <name>true</name></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"remove archives on db prior"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: ok\n"</literal>
            <literal type="string">"        repo2: error (no valid backups)\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): none present\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20181119-152138F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:38 / 2018-11-19 15:21:39\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 19.2MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 2.3MB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        diff backup: 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:52 / 2018-11-19 15:21:55\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000003 / 000000020000000000000003\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20181119-152138F_20181119-152155I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2018-11-19 15:21:55 / 2018-11-19 15:21:57\n"</literal>
            <literal type="string">"            wal start/stop: n/a\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20181119-152138F, 20181119-152138F_20181119-152152D\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000002/000000010000000000000005\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        incr backup: 20201116-155000F_20201119-152100I\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-19 15:21:00 / 2020-11-19 15:21:03\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000005 / 000000010000000000000005\n"</literal>
            <literal type="string">"            database size: 19.2MB, database backup size: 8.2KB\n"</literal>
            <literal type="string">"            repo1: backup set size: 2.3MB, backup size: 346B\n"</literal>
            <literal type="string">"            backup reference list: 20201116-155000F\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, prior backup: no archives but backups (code coverage)"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"Annotation assert not null value"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20181119-152138F_20181119-152155I"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepo</name></expr></argument>, <argument><expr><literal type="string">"1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo/"</literal> <name>STORAGE_PATH_BACKUP</name> <literal type="string">"/stanza1/"</literal> <name>INFO_BACKUP_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20181119-152138F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000002\",\"backup-archive-stop\":\"000000010000000000000002\","</literal>
            <literal type="string">"\"backup-info-repo-size\":2369186,\"backup-info-repo-size-delta\":2369186,"</literal>
            <literal type="string">"\"backup-info-size\":20162900,\"backup-info-size-delta\":20162900,"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640898,\"backup-timestamp-stop\":1542640899,\"backup-type\":\"full\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"20181119-152138F_20181119-152152D={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\",\"backup-archive-start\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-archive-stop\":\"000000020000000000000003\",\"backup-info-repo-size\":2369186,"</literal>
            <literal type="string">"\"backup-info-repo-size-delta\":346,\"backup-info-size\":20162900,\"backup-info-size-delta\":8428,"</literal>
            <literal type="string">"\"backup-prior\":\"20181119-152138F\",\"backup-reference\":[\"20181119-152138F\"],"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640912,\"backup-timestamp-stop\":1542640915,\"backup-type\":\"diff\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"20181119-152138F_20181119-152155I={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.08dev\","</literal>
            <literal type="string">"\"backup-annotation\":{\"key1\":null},"</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-info-repo-size\":2369186,"</literal>
            <literal type="string">"\"backup-info-repo-size-delta\":346,\"backup-info-size\":20162900,\"backup-info-size-delta\":8428,"</literal>
            <literal type="string">"\"backup-lsn-start\":\"285/89000028\",\"backup-lsn-stop\":\"285/89001F88\","</literal>
            <literal type="string">"\"backup-prior\":\"20181119-152138F_20181119-152152D\","</literal>
            <literal type="string">"\"backup-reference\":[\"20181119-152138F\",\"20181119-152138F_20181119-152152D\"],"</literal>
            <literal type="string">"\"backup-timestamp-start\":1542640915,\"backup-timestamp-stop\":1542640917,\"backup-type\":\"incr\","</literal>
            <literal type="string">"\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":false,\"option-backup-standby\":false,"</literal>
            <literal type="string">"\"option-checksum-page\":true,\"option-compress\":true,\"option-hardlink\":false,\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201510051\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6626363367545678089\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6625592122879095702,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-catalog-version\":201510051,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file - stanza1, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_ERROR</name><argument_list>(<argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>AssertError</name></expr></argument>, <argument><expr><literal type="string">"assertion 'value != NULL' failed"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, stanza requested does not exist, but other stanzas do"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza4"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza4\n"</literal>
            <literal type="string">"    status: error (missing stanza path)\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"multi-repo, stanza requested does not exist, but other stanzas do"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Add stanza3 to repo1 but with a current PG that is different than repo2</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, current database different across repos"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza3"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_ARCHIVE_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6626363367545678888\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6626363367545678089,\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-id\":6626363367545678888,\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file - stanza3, repo1 stanza upgraded"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=2\n"</literal>
            <literal type="string">"db-system-id=6626363367545678888\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201212-192538F={\"backrest-format\":5,\"backrest-version\":\"2.25\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000002\",\"backup-archive-stop\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1607801138,\"backup-timestamp-stop\":1607801140,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":true,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":true,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"20210112-192538F={\"backrest-format\":5,\"backrest-version\":\"2.25\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000006\",\"backup-archive-stop\":\"000000010000000000000006\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1610479538,\"backup-timestamp-stop\":1610479540,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":2,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":true,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":true,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6626363367545678089,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal>
            <literal type="string">"2={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6626363367545678888,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file - stanza3, repo1 stanza upgraded"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Create stanza3 db1 WAL, repo1</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.4-1/0000000100000000/000000010000000000000002-47dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.4-1/0000000100000000/000000010000000000000003-47dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.5-2/0000000100000000/000000010000000000000006-47dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza3\n"</literal>
            <literal type="string">"    status: error (database mismatch across repos)\n"</literal>
            <literal type="string">"        repo1: ok\n"</literal>
            <literal type="string">"        repo2: ok\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000001/000000010000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201110-100000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-10 10:00:00 / 2020-11-10 10:00:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000001 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201212-192538F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-12-12 19:25:38 / 2020-12-12 19:25:40\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000006/000000010000000000000006\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20210112-192538F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2021-01-12 19:25:38 / 2021-01-12 19:25:40\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000006 / 000000010000000000000006\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, database mismatch, repo2 stanza-upgrade needed"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                     <literal type="string">"\"archive\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000003\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000002\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":2,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.5-2\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000006\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000006\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":2"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"id\":\"9.4-1\","</literal>
                            <literal type="string">"\"max\":\"000000010000000000000002\","</literal>
                            <literal type="string">"\"min\":\"000000010000000000000001\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"backup\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000001\","</literal>
                                <literal type="string">"\"stop\":\"000000010000000000000002\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.25\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":2"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":26897020,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":3100,"</literal>
                                    <literal type="string">"\"size\":3159000"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":26897000"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20201110-100000F\","</literal>
                            <literal type="string">"\"prior\":null,"</literal>
                            <literal type="string">"\"reference\":null,"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1605002400,"</literal>
                                <literal type="string">"\"stop\":1605002402"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"full\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000002\","</literal>
                                <literal type="string">"\"stop\":\"000000010000000000000003\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.25\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":1,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":26897020,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":3100,"</literal>
                                    <literal type="string">"\"size\":3159000"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":26897000"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20201212-192538F\","</literal>
                            <literal type="string">"\"prior\":null,"</literal>
                            <literal type="string">"\"reference\":null,"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1607801138,"</literal>
                                <literal type="string">"\"stop\":1607801140"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"full\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"archive\":{"</literal>
                                <literal type="string">"\"start\":\"000000010000000000000006\","</literal>
                                <literal type="string">"\"stop\":\"000000010000000000000006\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"backrest\":{"</literal>
                                <literal type="string">"\"format\":5,"</literal>
                                <literal type="string">"\"version\":\"2.25\""</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"database\":{"</literal>
                                <literal type="string">"\"id\":2,"</literal>
                                <literal type="string">"\"repo-key\":1"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"info\":{"</literal>
                                <literal type="string">"\"delta\":26897020,"</literal>
                                <literal type="string">"\"repository\":{"</literal>
                                    <literal type="string">"\"delta\":3100,"</literal>
                                    <literal type="string">"\"size\":3159000"</literal>
                                <literal type="string">"},"</literal>
                                <literal type="string">"\"size\":26897000"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"label\":\"20210112-192538F\","</literal>
                            <literal type="string">"\"prior\":null,"</literal>
                            <literal type="string">"\"reference\":null,"</literal>
                            <literal type="string">"\"timestamp\":{"</literal>
                                <literal type="string">"\"start\":1610479538,"</literal>
                                <literal type="string">"\"stop\":1610479540"</literal>
                            <literal type="string">"},"</literal>
                            <literal type="string">"\"type\":\"full\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                     <literal type="string">"\"cipher\":\"mixed\","</literal>
                     <literal type="string">"\"db\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":2,"</literal>
                            <literal type="string">"\"repo-key\":1,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678888,"</literal>
                            <literal type="string">"\"version\":\"9.5\""</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"id\":1,"</literal>
                            <literal type="string">"\"repo-key\":2,"</literal>
                            <literal type="string">"\"system-id\":6626363367545678089,"</literal>
                            <literal type="string">"\"version\":\"9.4\""</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"name\":\"stanza3\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"},"</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"aes-256-cbc\","</literal>
                            <literal type="string">"\"key\":2,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":0,"</literal>
                                <literal type="string">"\"message\":\"ok\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":5,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"database mismatch across repos\""</literal>
                    <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - multi-repo, database mismatch, repo2 stanza-upgrade needed"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Crypto error</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"encryption error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Change repo1 to have the same cipher type as repo2 even though on disk it does not</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_Z</name><argument_list>(<argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/pgbackrest.conf"</literal></expr></argument>, <argument><expr><literal type="string">"[global]\nrepo-cipher-pass=123abc\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawStrId</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepoCipherType</name></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><name>cipherTypeAes256Cbc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptConfig</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/pgbackrest.conf"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [CryptoError] unable to load info file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza1/backup.info' or '"</literal>
                            <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza1/backup.info.copy':\n"</literal>
            <literal type="string">"               CryptoError: cipher header invalid\n"</literal>
            <literal type="string">"               HINT: is or was the repo encrypted?\n"</literal>
            <literal type="string">"               FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza1/backup.info.copy'"</literal>
                            <literal type="string">" for read\n"</literal>
            <literal type="string">"               HINT: backup.info cannot be opened and is required to perform a backup.\n"</literal>
            <literal type="string">"               HINT: has a stanza-create been performed?\n"</literal>
            <literal type="string">"               HINT: use option --stanza if encryption settings are different for the stanza than the global"</literal>
            <literal type="string">" settings.\n"</literal>
            <literal type="string">"        repo2: error (no valid backups)\n"</literal>
            <literal type="string">"    cipher: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000003/000000010000000000000004\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"stanza: stanza2\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [CryptoError] unable to load info file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza2/backup.info' or '"</literal>
                            <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza2/backup.info.copy':\n"</literal>
            <literal type="string">"               CryptoError: cipher header invalid\n"</literal>
            <literal type="string">"               HINT: is or was the repo encrypted?\n"</literal>
            <literal type="string">"               FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza2/backup.info.copy'"</literal>
                            <literal type="string">" for read\n"</literal>
            <literal type="string">"               HINT: backup.info cannot be opened and is required to perform a backup.\n"</literal>
            <literal type="string">"               HINT: has a stanza-create been performed?\n"</literal>
            <literal type="string">"               HINT: use option --stanza if encryption settings are different for the stanza than the global"</literal>
            <literal type="string">" settings.\n"</literal>
            <literal type="string">"        repo2: error (missing stanza path)\n"</literal>
            <literal type="string">"    cipher: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"stanza: stanza3\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [CryptoError] unable to load info file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info' or '"</literal>
                            <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info.copy':\n"</literal>
            <literal type="string">"               CryptoError: cipher header invalid\n"</literal>
            <literal type="string">"               HINT: is or was the repo encrypted?\n"</literal>
            <literal type="string">"               FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info.copy'"</literal>
                            <literal type="string">" for read\n"</literal>
            <literal type="string">"               HINT: backup.info cannot be opened and is required to perform a backup.\n"</literal>
            <literal type="string">"               HINT: has a stanza-create been performed?\n"</literal>
            <literal type="string">"               HINT: use option --stanza if encryption settings are different for the stanza than the global"</literal>
            <literal type="string">" settings.\n"</literal>
            <literal type="string">"        repo2: ok\n"</literal>
            <literal type="string">"    cipher: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000001/000000010000000000000002\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201110-100000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-10 10:00:00 / 2020-11-10 10:00:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000001 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - multi-repo, multi-stanza cipher error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Backup label not found, one repo in error</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"backup label exists on one repo, other repo in error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza3"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"20201110-100000F"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza3\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [CryptoError] unable to load info file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info' or '"</literal>
                            <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info.copy':\n"</literal>
            <literal type="string">"               CryptoError: cipher header invalid\n"</literal>
            <literal type="string">"               HINT: is or was the repo encrypted?\n"</literal>
            <literal type="string">"               FileMissingError: unable to open missing file '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/backup/stanza3/backup.info.copy'"</literal>
                            <literal type="string">" for read\n"</literal>
            <literal type="string">"               HINT: backup.info cannot be opened and is required to perform a backup.\n"</literal>
            <literal type="string">"               HINT: has a stanza-create been performed?\n"</literal>
            <literal type="string">"               HINT: use option --stanza if encryption settings are different for the stanza than the global"</literal>
            <literal type="string">" settings.\n"</literal>
            <literal type="string">"        repo2: error (requested backup not found)\n"</literal>
            <literal type="string">"    cipher: aes-256-cbc\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"backup label not found, one repo in error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Crypto error</comment>
        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"WAL read error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList2</name> <operator>=</operator> <call><name>strLstDup</name><argument_list>(<argument><expr><name>argListMultiRepo</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(
            <argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name> <literal type="string">"/9.4-1"</literal></expr></argument>, <argument><expr><operator>.</operator><name>mode</name> <operator>=</operator> <literal type="number">0200</literal></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"WAL directory with bad permissions"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [PathOpenError] unable to list file info for path '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo/archive/stanza1/9.4-1': [13]"</literal>
            <literal type="string">" Permission denied\n"</literal>
            <literal type="string">"        repo2: error (no valid backups)\n"</literal>
            <literal type="string">"    cipher: mixed\n"</literal>
            <literal type="string">"        repo1: none\n"</literal>
            <literal type="string">"        repo2: aes-256-cbc\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000003/000000010000000000000004\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"WAL directory read error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Unset environment key</comment>
        <expr_stmt><expr><call><name>hrnCfgEnvKeyRemoveRaw</name><argument_list>(<argument><expr><name>cfgOptRepoCipherPass</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>

    <comment type="line">//******************************************************************************************************************************</comment>
    <if_stmt><if>if <condition>(<expr><call><name>testBegin</name><argument_list>(<argument><expr><literal type="string">"database mismatch - special cases"</literal></expr></argument>)</argument_list></call></expr>)</condition>
    <block>{<block_content>
        <comment type="line">// These tests cover branches not covered in other tests</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, database mismatch, pg system-id only"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argList2</name> <init>= <expr><call><name>strLstNew</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList2</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList2</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201116-155000F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000002\",\"backup-archive-stop\":\"000000010000000000000003\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605541800,\"backup-timestamp-stop\":1605541802,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665679,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_ARCHIVE_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6569239123849665679,\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file, repo1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Create stanza1, repo1, archives</comment>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.4-1/0000000100000000/000000010000000000000002-22dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">0</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.4-1/0000000100000000/000000010000000000000003-37dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201116-155010F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000001\",\"backup-archive-stop\":\"000000010000000000000002\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605541810,\"backup-timestamp-stop\":1605541812,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665679,"</literal>
                <literal type="string">"\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file, repo2, same system-id, different version"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_ARCHIVE_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665679\n"</literal>
            <literal type="string">"db-version=\"9.5\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6569239123849665679,\"db-version\":\"9.5\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file, repo2, same system-id, different version"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.5-1/0000000100000000/000000010000000000000001-11dff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PUT_EMPTY</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name>
            <literal type="string">"/9.5-1/0000000100000000/000000010000000000000002-222ff2b7552a9d66e4bae1a762488a6885e7082c.gz"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Note that although the time on the backup in repo2 &gt; repo1, repo1 current db is not the same because of the version so</comment>
        <comment type="line">// the repo1, since read first, will be considered the current PG</comment>
        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (database mismatch across repos)\n"</literal>
            <literal type="string">"        repo1: ok\n"</literal>
            <literal type="string">"        repo2: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.5): 000000010000000000000001/000000010000000000000002\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155010F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:10 / 2020-11-16 15:50:12\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000001 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000010000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - db mismatch, diff system-id across repos, repo1 considered current db since read first"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"multi-repo, database mismatch, pg version only"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_BACKUP_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-catalog-version=201409291\n"</literal>
            <literal type="string">"db-control-version=942\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665888\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[backup:current]\n"</literal>
            <literal type="string">"20201116-155010F={"</literal>
            <literal type="string">"\"backrest-format\":5,\"backrest-version\":\"2.30\","</literal>
            <literal type="string">"\"backup-archive-start\":\"000000010000000000000001\",\"backup-archive-stop\":\"000000010000000000000002\","</literal>
            <literal type="string">"\"backup-info-repo-size\":3159000,\"backup-info-repo-size-delta\":3100,\"backup-info-size\":26897000,"</literal>
            <literal type="string">"\"backup-info-size-delta\":26897020,\"backup-timestamp-start\":1605541810,\"backup-timestamp-stop\":1605541812,"</literal>
            <literal type="string">"\"backup-type\":\"full\",\"db-id\":1,\"option-archive-check\":true,\"option-archive-copy\":true,"</literal>
            <literal type="string">"\"option-backup-standby\":false,\"option-checksum-page\":false,\"option-compress\":false,\"option-hardlink\":false,"</literal>
            <literal type="string">"\"option-online\":true}\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-catalog-version\":201409291,\"db-control-version\":942,\"db-system-id\":6569239123849665888,"</literal>
                <literal type="string">"\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put backup info to file, repo2, different system-id, same version"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_INFO_PUT</name><argument_list>(
            <argument><expr><call><name>storageRepoIdxWrite</name><argument_list>(<argument><expr><literal type="number">1</literal></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>INFO_ARCHIVE_PATH_FILE</name></expr></argument>,
            <argument><expr><literal type="string">"[db]\n"</literal>
            <literal type="string">"db-id=1\n"</literal>
            <literal type="string">"db-system-id=6569239123849665888\n"</literal>
            <literal type="string">"db-version=\"9.4\"\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"[db:history]\n"</literal>
            <literal type="string">"1={\"db-id\":6569239123849665888,\"db-version\":\"9.4\"}\n"</literal></expr></argument>,
            <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"put archive info to file, repo2, different system-id, same version"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (database mismatch across repos)\n"</literal>
            <literal type="string">"        repo1: ok\n"</literal>
            <literal type="string">"        repo2: ok\n"</literal>
            <literal type="string">"    cipher: none\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (prior)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): none present\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155010F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:10 / 2020-11-16 15:50:12\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000001 / 000000010000000000000002\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo2: backup set size: 3MB, backup size: 3KB\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"    db (current)\n"</literal>
            <literal type="string">"        wal archive min/max (9.4): 000000010000000000000002/000000010000000000000003\n"</literal>
            <literal type="string">"\n"</literal>
            <literal type="string">"        full backup: 20201116-155000F\n"</literal>
            <literal type="string">"            timestamp start/stop: 2020-11-16 15:50:00 / 2020-11-16 15:50:02\n"</literal>
            <literal type="string">"            wal start/stop: 000000010000000000000002 / 000000010000000000000003\n"</literal>
            <literal type="string">"            database size: 25.7MB, database backup size: 25.7MB\n"</literal>
            <literal type="string">"            repo1: backup set size: 3MB, backup size: 3KB\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - db mismatch, diff version across repos, repo1 considered current db since read first"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>

    <comment type="line">//******************************************************************************************************************************</comment>
    <if_stmt><if>if <condition>(<expr><call><name>testBegin</name><argument_list>(<argument><expr><literal type="string">"cmdInfo()"</literal></expr></argument>)</argument_list></call></expr>)</condition>
    <block>{<block_content>
        <decl_stmt><decl><type><name>StringList</name> <modifier>*</modifier></type><name>argList</name> <init>= <expr><call><name>strLstNew</name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(<argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_ARCHIVE</name></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create repo archive path"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(<argument><expr><call><name>storageRepoWrite</name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name>STORAGE_REPO_BACKUP</name></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"create repo backup path"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"no stanza exist"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Redirect stdout to a file</comment>
        <decl_stmt><decl><type><name>int</name></type> <name>stdoutSave</name> <init>= <expr><call><name>dup</name><argument_list>(<argument><expr><name>STDOUT_FILENO</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
        <decl_stmt><decl><type><specifier>const</specifier> <name>String</name> <modifier>*</modifier></type><name>stdoutFile</name> <init>= <expr><call><name>STRDEF</name><argument_list>(<argument><expr><name>TEST_PATH</name> <literal type="string">"/stdout.info"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <expr_stmt><expr><call><name>THROW_ON_SYS_ERROR</name><argument_list>(<argument><expr><call><name>freopen</name><argument_list>(<argument><expr><call><name>strZ</name><argument_list>(<argument><expr><name>stdoutFile</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"w"</literal></expr></argument>, <argument><expr><name>stdout</name></expr></argument>)</argument_list></call> <operator>==</operator> <name>NULL</name></expr></argument>, <argument><expr><name>FileWriteError</name></expr></argument>, <argument><expr><literal type="string">"unable to reopen stdout"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Not in a test wrapper to avoid writing to stdout</comment>
        <expr_stmt><expr><call><name>cmdInfo</name><argument_list>()</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Restore normal stdout</comment>
        <expr_stmt><expr><call><name>dup2</name><argument_list>(<argument><expr><name>stdoutSave</name></expr></argument>, <argument><expr><name>STDOUT_FILENO</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">// Check output of info command stored in file</comment>
        <expr_stmt><expr><call><name>TEST_STORAGE_GET</name><argument_list>(<argument><expr><name>storageTest</name></expr></argument>, <argument><expr><call><name>strZ</name><argument_list>(<argument><expr><name>stdoutFile</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="string">"No stanzas exist in the repository.\n"</literal></expr></argument>, <argument><expr><operator>.</operator><name>remove</name> <operator>=</operator> <name>true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"set option invalid without stanza option"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptSet</name></expr></argument>, <argument><expr><literal type="string">"bogus"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_ERROR</name><argument_list>(<argument><expr><call><name>hrnCfgLoadP</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name>OptionInvalidError</name></expr></argument>, <argument><expr><literal type="string">"option 'set' not valid without option 'stanza'"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="line">//--------------------------------------------------------------------------------------------------------------------------</comment>
        <expr_stmt><expr><call><name>TEST_TITLE</name><argument_list>(<argument><expr><literal type="string">"repo-level error"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>HRN_STORAGE_PATH_CREATE</name><argument_list>(<argument><expr><name>storageTest</name></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>, <argument><expr><operator>.</operator><name>mode</name> <operator>=</operator> <literal type="number">0200</literal></expr></argument>, <argument><expr><operator>.</operator><name>comment</name> <operator>=</operator> <literal type="string">"repo directory with bad permissions"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList</name> <operator>=</operator> <call><name>strLstNew</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: [invalid]\n"</literal>
            <literal type="string">"    status: error (other)\n"</literal>
            <literal type="string">"            [PathOpenError] unable to list file info for path '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo2/backup': [13] Permission denied\n"</literal>
            <literal type="string">"    cipher: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - invalid stanza"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptOutput</name></expr></argument>, <argument><expr><literal type="string">"json"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"["</literal>
                <literal type="string">"{"</literal>
                    <literal type="string">"\"archive\":[],"</literal>
                    <literal type="string">"\"backup\":[],"</literal>
                    <literal type="string">"\"cipher\":\"none\","</literal>
                    <literal type="string">"\"db\":[],"</literal>
                    <literal type="string">"\"name\":\"[invalid]\","</literal>
                    <literal type="string">"\"repo\":["</literal>
                        <literal type="string">"{"</literal>
                            <literal type="string">"\"cipher\":\"none\","</literal>
                            <literal type="string">"\"key\":1,"</literal>
                            <literal type="string">"\"status\":{"</literal>
                                <literal type="string">"\"code\":99,"</literal>
                                <literal type="string">"\"message\":\"[PathOpenError] unable to list file info for path '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo2/backup':"</literal>
                                    <literal type="string">" [13] Permission denied\""</literal>
                            <literal type="string">"}"</literal>
                        <literal type="string">"}"</literal>
                    <literal type="string">"],"</literal>
                    <literal type="string">"\"status\":{"</literal>
                        <literal type="string">"\"code\":99,"</literal>
                        <literal type="string">"\"lock\":{\"backup\":{\"held\":false}},"</literal>
                        <literal type="string">"\"message\":\"other\""</literal>
                        <literal type="string">"}"</literal>
                <literal type="string">"}"</literal>
            <literal type="string">"]"</literal></expr></argument>,
            <argument><expr><literal type="string">"json - invalid stanza"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><name>argList</name> <operator>=</operator> <call><name>strLstNew</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">1</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo2"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>hrnCfgArgRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptStanza</name></expr></argument>, <argument><expr><literal type="string">"stanza1"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: error (other)\n"</literal>
            <literal type="string">"            [PathOpenError] unable to list file info for path '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo2/backup': [13] Permission denied\n"</literal>
            <literal type="string">"    cipher: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - stanza requested"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>hrnCfgArgKeyRawZ</name><argument_list>(<argument><expr><name>argList</name></expr></argument>, <argument><expr><name>cfgOptRepoPath</name></expr></argument>, <argument><expr><literal type="number">2</literal></expr></argument>, <argument><expr><name>TEST_PATH</name> <literal type="string">"/repo"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt><expr><call><name>HRN_CFG_LOAD</name><argument_list>(<argument><expr><name>cfgCmdInfo</name></expr></argument>, <argument><expr><name>argList</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt><expr><call><name>TEST_RESULT_STR_Z</name><argument_list>(
            <argument><expr><call><name>infoRender</name><argument_list>()</argument_list></call></expr></argument>,
            <argument><expr><literal type="string">"stanza: stanza1\n"</literal>
            <literal type="string">"    status: mixed\n"</literal>
            <literal type="string">"        repo1: error (other)\n"</literal>
            <literal type="string">"               [PathOpenError] unable to list file info for path '"</literal> <name>TEST_PATH</name> <literal type="string">"/repo2/backup':"</literal>
                <literal type="string">" [13] Permission denied\n"</literal>
            <literal type="string">"        repo2: error (missing stanza path)\n"</literal>
            <literal type="string">"    cipher: none\n"</literal></expr></argument>,
            <argument><expr><literal type="string">"text - stanza repo structure exists"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>

    <expr_stmt><expr><call><name>FUNCTION_HARNESS_RETURN_VOID</name><argument_list>()</argument_list></call></expr>;</expr_stmt>
</block_content>}</block></function>
</unit>
